{"version":3,"sources":["fields/post_type_select/scripts.js"],"names":["window","document","$","AO","$ptsSelects","$select","select","i","fieldData","data","AlchemyPTSData","ptsData","location","select2","searchParams","href","get","locale","ajax","url","type","dataType","params","delay","term","pageID","post-type","page-id","processResults","results","minimumInputLength","$target","option","e","detach","target","change","children","id","siblings","val","on","get_post_type_select_value","Promise","resolve","value","concat","jQuery"],"mappings":"AAAA,cAEA,SAACA,EAAAC,EAAAC,GACGF,EAAAG,GAAYH,EAAAG,IAAZ,GAGID,EAAAD,GAAMG,MAAcF,WAApB,IAAME,EAAcF,EAAE,4BAGlBE,EAAiB,IACPC,EAAYC,KAAAA,SAADC,EAAjBD,GACME,IAASH,EAAWI,EAAAA,GACVC,EAAAA,EAAeD,KAA/B,WACgBE,EAAGD,eAAeE,OAG1BC,EAFkBC,IAAAA,IAAAA,EAAiBF,SAA3CG,MAEgBD,aAAAE,IAAA,QAENX,EAAAQ,QAAA,CACGF,SADHH,EAAAS,OAEIC,KAFJ,CAGQC,IAHRR,EAAAQ,IAAAC,KAAA,MAKIC,SAAAC,OACKC,MAAA,IACHd,KAAA,SAAAa,GACYX,MAAO,CACNH,YAAUc,EAHpBE,KAIQC,SAAAA,EAAAA,MAJfC,YAAAlB,EAAA,aANFmB,UAAAF,IAeaG,eAAOnB,SAAAA,GADlB,MAAA,CAdFoB,QAAApB,EAAAA,OAoBNqB,OAAoB,GAEdC,mBAAN,IACMC,GAAM,iBAAG,SAAAC,GAERC,IAAPH,EAAA7B,EAAA+B,EAAAE,QACeH,EAAQI,EAAvBC,SAAuBD,UAAAA,OAAvBH,EAAAX,OAAAb,KAAA6B,GAAuBF,MAGnBG,EAASL,SACLM,EAAQJ,OAAhBJ,GAAAI,WAGX/B,EAAAkC,SAAA,iCAAAE,GAAA,QAAA,WA9CLpC,EAAAmC,IAAA,IAAAJ,eAqDQjC,GAAAuC,2BAAS,SAAAJ,GAHb,OAAAK,QAAAC,QAAA,CADJxB,KAAA,mBAOOnB,GAAAA,EAHC4C,MAAS3C,EAAC,IAAA4C,OAAKR,IAAME,SAxDjC,CA2DGxC,OAAQC,SAAU8C","file":"fields\\post_type_select\\scripts.min.js","sourcesContent":["\"use strict\";\n\n(function(window, document, $) {\n    window.AO = window.AO || {};\n\n    $(document).ready(() => {\n        const $ptsSelects = $('.jsAlchemyPostTypeSelect');\n\n        if( $ptsSelects[0] ) {\n            $ptsSelects.each((i, select) => {\n                const $select = $(select);\n                const fieldData = $select.data('alchemy');\n                const ptsData = AlchemyPTSData['search'];\n                const currentUrl = new URL(window.location.href);\n                const pageID = currentUrl.searchParams.get('page');\n\n                $select.select2({\n                    language: fieldData.locale,\n                    ajax: {\n                        url: ptsData.url,\n                        type: 'get',\n                        dataType: 'json',\n                        delay: 250,\n                        data: params => {\n                            return {\n                                'searchedFor': params.term,\n                                '_wpnonce': ptsData.nonce,\n                                'post-type': fieldData['post-type'],\n                                'page-id': pageID\n                            };\n                        },\n                        processResults: data => {\n                            return {\n                                results: data.data,\n                            };\n                        },\n                        cache: false\n                    },\n                    minimumInputLength: 2\n                }).on('select2:select', e => {\n                    const $target = $(e.target);\n                    const option = $target.children(`[value=${e.params.data.id}]`);\n\n                    option.detach();\n                    $target.append(option).change();\n                });\n\n                $select.siblings('.jsAlchemyPostTypeSelectClear').on('click', () => {\n                    $select.val(\"\").change();\n                });\n            });\n        }\n    });\n\n    AO.get_post_type_select_value = id => {\n        return Promise.resolve( {\n            'type': 'post_type_select',\n            'id': id,\n            'value': $(`#${id}`).val()\n        } );\n    };\n})(window, document, jQuery);"]}