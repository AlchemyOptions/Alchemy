{"version":3,"sources":["fields/taxonomy_select/scripts.js"],"names":["window","document","$","AO","$ptsSelects","$select","select","i","fieldData","data","AlchemyTaxonomySelectData","ptsData","select2","searchParams","location","href","get","locale","ajax","url","type","dataType","params","delay","term","pageID","taxonomy","page-id","processResults","results","minimumInputLength","$target","option","e","detach","target","change","children","id","siblings","val","on","get_taxonomy_select_value","Promise","resolve","value","concat","jQuery"],"mappings":"AAAA,cAEA,SAACA,EAAAC,EAAAC,GACGF,EAAAG,GAAYH,EAAAG,IAAZ,GAGID,EAAAD,GAAMG,MAAcF,WAApB,IAAME,EAAcF,EAAE,4BAGlBE,EAAiB,IACPC,EAAYC,KAAAA,SAADC,EAAjBD,GACME,IAASH,EAAWI,EAAAA,GACVC,EAAAA,EAAAA,KAAyB,WACzBC,EAAGD,0BAAnB,OAGQE,EAFkBC,IAAAA,IAAAA,EAAiBC,SAA3CC,MAEgBF,aAAAG,IAAA,QAENX,EAAAO,QAAA,CACGD,SADHH,EAAAS,OAEIC,KAFJ,CAGQC,IAHRR,EAAAQ,IAAAC,KAAA,MAKIC,SAAAC,OACKC,MAAA,IACHd,KAAA,SAAAa,GACYX,MAAO,CACPH,YAAUc,EAHnBE,KAIQC,SAAAA,EAAAA,MAJfC,SAAAlB,EAAA,SANFmB,UAAAF,IAeaG,eAAOnB,SAAAA,GADlB,MAAA,CAdFoB,QAAApB,EAAAA,OAoBNqB,OAAoB,GAEdC,mBAAN,IACMC,GAAM,iBAAG,SAAAC,GAERC,IAAPH,EAAA7B,EAAA+B,EAAAE,QACeH,EAAQI,EAAvBC,SAAuBD,UAAAA,OAAvBH,EAAAX,OAAAb,KAAA6B,GAAuBF,MAGnBG,EAASL,SACLM,EAAQJ,OAAhBJ,GAAAI,WAGX/B,EAAAkC,SAAA,iCAAAE,GAAA,QAAA,WA9CLpC,EAAAmC,IAAA,IAAAJ,eAqDQjC,GAAAuC,0BAAqBF,SAAAA,GAHzB,OAAAG,QAAAC,QAAA,CADJxB,KAAA,kBAOOnB,GAAAA,EAHC4C,MAAS3C,EAAC,IAAA4C,OAAKR,IAAME,SAxDjC,CA2DGxC,OAAQC,SAAU8C","file":"fields\\taxonomy_select\\scripts.min.js","sourcesContent":["\"use strict\";\n\n(function(window, document, $) {\n    window.AO = window.AO || {};\n\n    $(document).ready(() => {\n        const $ptsSelects = $('.jsAlchemyTaxonomySelect');\n\n        if( $ptsSelects[0] ) {\n            $ptsSelects.each((i, select) => {\n                const $select = $(select);\n                const fieldData = $select.data('alchemy');\n                const ptsData = AlchemyTaxonomySelectData['search'];\n                const currentUrl = new URL(window.location.href);\n                const pageID = currentUrl.searchParams.get('page');\n\n                $select.select2({\n                    language: fieldData.locale,\n                    ajax: {\n                        url: ptsData.url,\n                        type: 'get',\n                        dataType: 'json',\n                        delay: 250,\n                        data: params => {\n                            return {\n                                'searchedFor': params.term,\n                                '_wpnonce': ptsData.nonce,\n                                'taxonomy': fieldData['taxonomy'],\n                                'page-id': pageID\n                            };\n                        },\n                        processResults: data => {\n                            return {\n                                results: data.data,\n                            };\n                        },\n                        cache: false\n                    },\n                    minimumInputLength: 2\n                }).on('select2:select', e => {\n                    const $target = $(e.target);\n                    const option = $target.children(`[value=${e.params.data.id}]`);\n\n                    option.detach();\n                    $target.append(option).change();\n                });\n\n                $select.siblings('.jsAlchemyTaxonomySelectClear').on('click', () => {\n                    $select.val(\"\").change();\n                });\n            });\n        }\n    });\n\n    AO.get_taxonomy_select_value = id => {\n        return Promise.resolve( {\n            'type': 'taxonomy_select',\n            'id': id,\n            'value': $(`#${id}`).val()\n        } );\n    };\n})(window, document, jQuery);"]}