{"version":3,"sources":["fields/taxonomy-select/scripts.js"],"names":["window","document","$","AO","$ptsSelects","$select","select","i","fieldData","data","AlchemyTaxonomySelectData","ptsData","select2","searchParams","location","href","get","locale","ajax","url","type","dataType","params","delay","term","pageID","taxonomy","page-id","processResults","results","minimumInputLength","$target","option","e","detach","target","change","children","id","siblings","val","on","get_taxonomy_select_value","Promise","resolve","value","concat","jQuery"],"mappings":"AAAA,cAEA,SAACA,EAAAC,EAAAC,GACGF,EAAAG,GAAYH,EAAAG,IAAZ,GAGID,EAAAD,GAAMG,MAAcF,WAApB,IAAME,EAAcF,EAAE,4BAGlBE,EAAiB,IACPC,EAAYC,KAAAA,SAADC,EAAjBD,GACME,IAASH,EAAWI,EAAAA,GACVC,EAAAA,EAAAA,KAAyB,WACzBC,EAAGD,0BAAnB,OAGQE,EAFkBC,IAAAA,IAAAA,EAAiBC,SAA3CC,MAEgBF,aAAAG,IAAA,QAENX,EAAAO,QAAA,CACGD,SADHH,EAAAS,OAEIC,KAFJ,CAGQC,IAHRR,EAAAQ,IAAAC,KAAA,MAKIC,SAAAC,OACKC,MAAA,IACHd,KAAA,SAAAa,GACYX,MAAO,CACPH,YAAUc,EAHnBE,KAIQC,SAAAA,EAAAA,MAJfC,SAAAlB,EAAA,SANFmB,UAAAF,IAeaG,eAAOnB,SAAAA,GADlB,MAAA,CAdFoB,QAAApB,EAAAA,OAoBNqB,OAAoB,GAEdC,mBAAN,IACMC,GAAM,iBAAG,SAAAC,GAERC,IAAPH,EAAA7B,EAAA+B,EAAAE,QACeH,EAAQI,EAAvBC,SAAuBD,UAAAA,OAAvBH,EAAAX,OAAAb,KAAA6B,GAAuBF,MAGnBG,EAASL,SACLM,EAAQJ,OAAhBJ,GAAAI,WAGX/B,EAAAkC,SAAA,iCAAAE,GAAA,QAAA,WA9CLpC,EAAAmC,IAAA,IAAAJ,eAqDQjC,GAAAuC,0BAAqBF,SAAAA,GAHzB,OAAAG,QAAAC,QAAA,CADJxB,KAAA,kBAOOnB,GAAAA,EAHC4C,MAAS3C,EAAC,IAAA4C,OAAKR,IAAME,SAxDjC,CA2DGxC,OAAQC,SAAU8C","file":"fields\\taxonomy-select\\scripts.min.js","sourcesContent":["\"use strict\";\r\n\r\n(function(window, document, $) {\r\n    window.AO = window.AO || {};\r\n\r\n    $(document).ready(() => {\r\n        const $ptsSelects = $('.jsAlchemyTaxonomySelect');\r\n\r\n        if( $ptsSelects[0] ) {\r\n            $ptsSelects.each((i, select) => {\r\n                const $select = $(select);\r\n                const fieldData = $select.data('alchemy');\r\n                const ptsData = AlchemyTaxonomySelectData['search'];\r\n                const currentUrl = new URL(window.location.href);\r\n                const pageID = currentUrl.searchParams.get('page');\r\n\r\n                $select.select2({\r\n                    language: fieldData.locale,\r\n                    ajax: {\r\n                        url: ptsData.url,\r\n                        type: 'get',\r\n                        dataType: 'json',\r\n                        delay: 250,\r\n                        data: params => {\r\n                            return {\r\n                                'searchedFor': params.term,\r\n                                '_wpnonce': ptsData.nonce,\r\n                                'taxonomy': fieldData['taxonomy'],\r\n                                'page-id': pageID\r\n                            };\r\n                        },\r\n                        processResults: data => {\r\n                            return {\r\n                                results: data.data,\r\n                            };\r\n                        },\r\n                        cache: false\r\n                    },\r\n                    minimumInputLength: 2\r\n                }).on('select2:select', e => {\r\n                    const $target = $(e.target);\r\n                    const option = $target.children(`[value=${e.params.data.id}]`);\r\n\r\n                    option.detach();\r\n                    $target.append(option).change();\r\n                });\r\n\r\n                $select.siblings('.jsAlchemyTaxonomySelectClear').on('click', () => {\r\n                    $select.val(\"\").change();\r\n                });\r\n            });\r\n        }\r\n    });\r\n\r\n    AO.get_taxonomy_select_value = id => {\r\n        return Promise.resolve( {\r\n            'type': 'taxonomy_select',\r\n            'id': id,\r\n            'value': $(`#${id}`).val()\r\n        } );\r\n    };\r\n})(window, document, jQuery);"]}