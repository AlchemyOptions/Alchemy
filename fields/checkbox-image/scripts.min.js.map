{"version":3,"sources":["fields/checkbox-image/scripts.js"],"names":["window","document","$","AO","$checkboxImages","initialise_checkbox_image","checkboxImage","$labels","$el","find","isMultiple","data","filter","multiple","attr","i","el","hasClass","$label","e","preventDefault","this","toggleClass","is","removeClass","prev","prop","on","inArray","which","get_checkbox_image_value","$repeatee","id","concat","value","Promise","resolve","map","checkbox","type","jQuery"],"mappings":"AAAA,cAEA,SAACA,EAAAC,EAAAC,GACGF,EAAAG,GAAYH,EAAAG,IAAZ,GAEA,IAAMC,EAAkBF,EAAE,2BAoBtB,SAASG,EAATC,GACMC,IAAAA,EAAUC,EAAIC,GACdC,EAAgBF,EAACG,KAAK,SAEpBC,EAAOJ,EAAAG,KAAW,WAAAE,SAEvBC,EAAKF,OAFR,SAEoBG,EAFpBC,GAIA,OAAAd,EAAkBY,GAAKG,SAAA,+BAEhBH,KAAA,WAAS,GAGZN,EAAMU,KAAM,SAAZJ,KAAA,YAAA,GAEAN,EAAIU,GAAAA,QAAOD,+BAA0C,SAAAE,GACjDA,EAAAC,iBAHJ,IAAMF,EAAShB,EAAEmB,MAOLT,EAAOK,SAACF,+BADdL,GAMCY,EAAPV,OAAmB,SAAAG,EAAAC,GAfvB,OAAAd,EAAAc,GAAAO,GAAAL,KAkBOM,YAAY,2BAAgCC,KAAA,SAAWC,KAAA,WAAA,GAGtDR,EAAOD,YAAU,2BAAgCQ,KAAA,SAAAC,KAAA,UAAAR,EAAAD,SAAA,+BAHzDT,EAAImB,GAAG,WAAY,+BAAgC,SAASR,GAOlDS,IAAAA,EAAF1B,EAAoBmB,MAGbC,EAAAA,SAAY,+BAHiB,IAApCpB,EAAE0B,QAAST,EAAEU,MAAO,CAAC,GAAI,OAQlCC,EAAAA,iBAGaZ,EAAZI,YAAA,2BAAAG,KAAA,SAAAC,KAAA,UAAAR,EAAAD,SAAA,+BA/DAb,EAAA,IACIC,EAAAA,KAAAA,SAAAA,EAA0BW,GAD9BX,EAAAW,KAMAd,EAAAD,GAAM8B,GAAS,sBAAf,SAAAZ,EAAAR,GACMP,IAAAA,EAAkB2B,EAAAA,SAAUtB,KAAK,2BAGnCL,EAAqB,IACjBC,EAAAA,KAAyB,SAACW,EAA1BA,GADJX,EAAAW,OA0DCb,GAFO2B,yBAAR,SAAAE,GADJ,IAIOxB,EAAAN,EAAA,IAAA+B,OAAAD,IAENE,EAAA,GAED,OACIA,EADGC,EAAAA,KAAQC,WAASvB,SACZL,EAAAC,KAAA,YADY4B,IAAA,SAAAtB,EAAAuB,GAAA,OAAApC,EAAAoC,GAAA3B,KAAA,WAGXuB,MAhBjB1B,EAAAC,KAAA,YAAAE,KAAA,SAaWwB,QAAQC,QAAS,CACpBG,KAAQ,iBACRP,GAAMA,EACNE,MAASA,KAlFrB,CAqFGlC,OAAQC,SAAUuC","file":"fields\\checkbox-image\\scripts.min.js","sourcesContent":["\"use strict\";\r\n\r\n(function(window, document, $) {\r\n    window.AO = window.AO || {};\r\n\r\n    const $checkboxImages = $('.jsAlchemyCheckboxImage');\r\n\r\n    if( $checkboxImages[0] ) {\r\n        $checkboxImages.each((i, el) => {\r\n            initialise_checkbox_image(el);\r\n        });\r\n    }\r\n\r\n    $(document).on('alch_repeatee_added', function(e, data) {\r\n        const $repeatee = data.repeatee;\r\n        const $checkboxImages = $repeatee.find('.jsAlchemyCheckboxImage');\r\n\r\n        if( $checkboxImages[0] ) {\r\n            $checkboxImages.each((i, el) => {\r\n                initialise_checkbox_image(el);\r\n            });\r\n        }\r\n    });\r\n\r\n    function initialise_checkbox_image(checkboxImage) {\r\n        const $el = $(checkboxImage);\r\n        const $labels = $el.find('label');\r\n        const isMultiple = $el.data('alchemy').multiple;\r\n\r\n        $labels.filter((i, el) => {\r\n            return ! $(el).hasClass('checkbox__label--disabled')\r\n        }).attr('tabindex', 0);\r\n\r\n        $el.find('input').attr('tabindex', -1);\r\n\r\n        $el.on('click', '.jsAlchemyCheckboxImageLabel', function(e){\r\n            e.preventDefault();\r\n\r\n            const $label = $(this);\r\n\r\n            if( $label.hasClass( 'checkbox__label--disabled' ) ) {\r\n                return;\r\n            }\r\n\r\n            if( ! isMultiple ) {\r\n                $labels.filter((i, el) => {\r\n                    return ! $(el).is($label)\r\n                }).removeClass('checkbox__label--active').prev('input').prop('checked', false);\r\n            }\r\n\r\n            $label.toggleClass('checkbox__label--active').prev('input').prop('checked', $label.hasClass( 'checkbox__label--active' ));\r\n        });\r\n\r\n        $el.on('keypress', '.jsAlchemyCheckboxImageLabel', function(e){\r\n            const $label = $(this);\r\n\r\n            if( $label.hasClass( 'checkbox__label--disabled' ) ) {\r\n                return;\r\n            }\r\n\r\n            if( $.inArray( e.which, [13, 32] ) !== -1 ) {\r\n                e.preventDefault();\r\n\r\n                $label.toggleClass('checkbox__label--active').prev('input').prop('checked', $label.hasClass( 'checkbox__label--active' ));\r\n            }\r\n        });\r\n    }\r\n\r\n    AO.get_checkbox_image_value = id => {\r\n        const $el = $(`#${id}`);\r\n\r\n        let value = '';\r\n\r\n        if( $el.data('alchemy').multiple ) {\r\n            value = $el.find(':checked').map((i, checkbox) => {\r\n                return $(checkbox).data('value');\r\n            }).get();\r\n        } else {\r\n            value = $el.find(':checked').data('value');\r\n        }\r\n\r\n        return Promise.resolve( {\r\n            'type': 'checkbox_image',\r\n            'id': id,\r\n            'value': value\r\n        } );\r\n    };\r\n})(window, document, jQuery);"]}